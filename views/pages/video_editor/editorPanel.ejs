<div class="p-6 space-y-6">
    <h2 class="text-2xl font-bold text-gray-800 mb-6">Editing Video</h2>

    <!-- Progress Overlay -->
    <div id="progressOverlay" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50">
        <div class="bg-white p-8 rounded-lg shadow-xl max-w-md w-full mx-4">
            <div class="text-center">
                <div class="mb-4">
                    <div class="relative pt-1">
                        <div class="flex mb-2 items-center justify-between">
                            <div>
                                <span id="progressStatus"
                                    class="text-xs font-semibold inline-block py-1 px-2 uppercase rounded-full text-indigo-600 bg-indigo-200">
                                    Processing
                                </span>
                            </div>
                            <div class="text-right">
                                <span id="progressPercentage"
                                    class="text-xs font-semibold inline-block text-indigo-600">
                                    0%
                                </span>
                            </div>
                        </div>
                        <div class="overflow-hidden h-2 mb-4 text-xs flex rounded bg-indigo-200">
                            <div id="progressBar"
                                class="shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-indigo-500 w-0 transition-all duration-300">
                            </div>
                        </div>
                    </div>
                </div>
                <h3 id="progressMessage" class="text-lg font-semibold text-gray-900 mb-2">Processing video...</h3>
                <p id="progressDetail" class="text-sm text-gray-500">Please wait while we process your video</p>
            </div>
        </div>
    </div>

    <div class="flex gap-6">
        <!-- Left Section - Video Player -->
        <div class="w-3/5 space-y-4">
            <!-- Video Player Card -->
            <div class="bg-gray-900 rounded-lg p-4 shadow-lg">
                <div class="relative" style="padding-top: 66.25%;">
                    <video id="videoPlayer" controls
                        class="absolute inset-0 w-full h-full rounded-lg object-contain bg-black"
                        src="/<%= sourceFile || downloadedFile %>">
                        Your browser does not support the video tag.
                    </video>
                </div>
            </div>

            <!-- Video Information Card -->
            <div class="bg-white rounded-lg p-4 shadow-lg">
                <h3 class="text-lg font-semibold mb-3 text-gray-700">Video Information</h3>
                <div class="grid grid-cols-2 gap-4">
                    <div class="flex items-center space-x-2">
                        <span class="text-gray-600">Duration:</span>
                        <span id="videoDuration" class="font-medium">Loading...</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <span class="text-gray-600">Current Time:</span>
                        <span id="currentTime" class="font-medium">0:00</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Section - Editor Controls -->
        <div class="w-2/5 space-y-4 max-h-[calc(100vh-2rem)] overflow-y-auto">
            <form id="editForm" class="space-y-4">
                <!-- Trim Controls Card -->
                <div class="bg-white rounded-lg p-4 shadow-lg">
                    <h3 class="text-lg font-semibold mb-4 text-gray-700 flex items-center justify-between cursor-pointer"
                        onclick="toggleSection('trimControls')">
                        <div class="flex items-center">
                            <svg class="w-5 h-5 mr-2 text-gray-500" fill="none" stroke="currentColor"
                                viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" />
                            </svg>
                            Trim Video
                        </div>
                        <svg class="w-5 h-5 transform transition-transform duration-200" id="trimControlsIcon"
                            fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                        </svg>
                    </h3>
                    <div id="trimControls" class="grid grid-cols-2 gap-4 transition-all duration-300 overflow-hidden"
                        style="max-height: 0;">
                        <div>
                            <label for="trimStart" class="block text-sm font-medium text-gray-700 mb-1">Start Time
                                (s)</label>
                            <div class="relative">
                                <input type="number" id="trimStart" name="trimStart" min="0" step="0.1"
                                    class="block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 pr-16">
                                <button type="button" id="setTrimStartBtn"
                                    class="absolute right-0 top-0 h-full px-3 bg-gray-50 text-sm font-medium text-gray-600 hover:bg-gray-100 rounded-r-lg border-l">
                                    Set
                                </button>
                            </div>
                        </div>
                        <div>
                            <label for="trimEnd" class="block text-sm font-medium text-gray-700 mb-1">End Time
                                (s)</label>
                            <div class="relative">
                                <input type="number" id="trimEnd" name="trimEnd" min="0" step="0.1"
                                    class="block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 pr-16">
                                <button type="button" id="setTrimEndBtn"
                                    class="absolute right-0 top-0 h-full px-3 bg-gray-50 text-sm font-medium text-gray-600 hover:bg-gray-100 rounded-r-lg border-l">
                                    Set
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Crop Controls Card -->
                <div class="bg-white rounded-lg p-4 shadow-lg">
                    <h3 class="text-lg font-semibold mb-4 text-gray-700 flex items-center justify-between cursor-pointer"
                        onclick="toggleSection('cropControls')">
                        <div class="flex items-center">
                            <svg class="w-5 h-5 mr-2 text-gray-500" fill="none" stroke="currentColor"
                                viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12" />
                            </svg>
                            Crop Video
                        </div>
                        <svg class="w-5 h-5 transform transition-transform duration-200" id="cropControlsIcon"
                            fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                        </svg>
                    </h3>
                    <div id="cropControls" class="grid grid-cols-2 gap-4 transition-all duration-300 overflow-hidden"
                        style="max-height: 0;">
                        <div>
                            <label for="cropWidth" class="block text-sm font-medium text-gray-700 mb-1">Width</label>
                            <input type="number" id="cropWidth" name="cropWidth" min="0"
                                class="block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                        </div>
                        <div>
                            <label for="cropHeight" class="block text-sm font-medium text-gray-700 mb-1">Height</label>
                            <input type="number" id="cropHeight" name="cropHeight" min="0"
                                class="block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                        </div>
                        <div>
                            <label for="cropX" class="block text-sm font-medium text-gray-700 mb-1">X Position</label>
                            <input type="number" id="cropX" name="cropX" min="0"
                                class="block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                        </div>
                        <div>
                            <label for="cropY" class="block text-sm font-medium text-gray-700 mb-1">Y Position</label>
                            <input type="number" id="cropY" name="cropY" min="0"
                                class="block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                        </div>
                    </div>
                </div>

                <!-- Effects Controls Card -->
                <div class="bg-white rounded-lg p-4 shadow-lg">
                    <h3 class="text-lg font-semibold mb-4 text-gray-700 flex items-center justify-between cursor-pointer"
                        onclick="toggleSection('effectsControls')">
                        <div class="flex items-center">
                            <svg class="w-5 h-5 mr-2 text-gray-500" fill="none" stroke="currentColor"
                                viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z" />
                            </svg>
                            Video Effects
                        </div>
                        <svg class="w-5 h-5 transform transition-transform duration-200" id="effectsControlsIcon"
                            fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                        </svg>
                    </h3>
                    <div id="effectsControls" class="space-y-4 transition-all duration-300 overflow-hidden"
                        style="max-height: 0;">
                        <!-- Effect Type Selection -->
                        <div>
                            <label for="effectType" class="block text-sm font-medium text-gray-700 mb-1">Select
                                Effect</label>
                            <select id="effectType" name="effectType"
                                class="block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                                <option value="">None</option>
                                <option value="blackAndWhite">Black and White</option>
                                <option value="vintage">Vintage/Sepia</option>
                                <option value="glitch">Glitch Effect</option>
                                <option value="vignette">Vignette</option>
                                <option value="blur">Gaussian Blur</option>
                                <option value="chromaKey">Chroma Key (Green Screen)</option>
                                <option value="zoom">Zoom Effect</option>
                            </select>
                        </div>

                        <!-- Zoom Controls (initially hidden) -->
                        <div id="zoomControls" class="space-y-4 hidden">
                            <div>
                                <label for="zoomStartTime" class="block text-sm font-medium text-gray-700 mb-1">Start
                                    Time (seconds)</label>
                                <div class="flex gap-2">
                                    <input type="number" id="zoomStartTime" name="zoomStartTime" min="0" step="0.1"
                                        value="0"
                                        class="block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                                    <button type="button" id="setZoomStartBtn"
                                        class="px-3 bg-gray-100 text-sm font-medium text-gray-600 hover:bg-gray-200 rounded-lg border">
                                        Set
                                    </button>
                                </div>
                            </div>
                            <div>
                                <label for="zoomDuration" class="block text-sm font-medium text-gray-700 mb-1">Duration
                                    (seconds)</label>
                                <input type="number" id="zoomDuration" name="zoomDuration" min="0.1" step="0.1"
                                    value="2"
                                    class="block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                            </div>
                            <div>
                                <label for="zoomScale" class="block text-sm font-medium text-gray-700 mb-1">Zoom Scale
                                    (1.1-3.0)</label>
                                <input type="number" id="zoomScale" name="zoomScale" min="1.1" max="3.0" step="0.1"
                                    value="1.5"
                                    class="block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                            </div>
                            <div>
                                <label for="zoomDirection" class="block text-sm font-medium text-gray-700 mb-1">Zoom
                                    Direction</label>
                                <select id="zoomDirection" name="zoomDirection"
                                    class="block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                                    <option value="in">Zoom In</option>
                                    <option value="out">Zoom Out</option>
                                </select>
                            </div>
                            <div>
                                <label for="zoomCenter" class="block text-sm font-medium text-gray-700 mb-1">Zoom
                                    Center</label>
                                <select id="zoomCenter" name="zoomCenter"
                                    class="block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                                    <option value="center">Center</option>
                                    <option value="top">Top</option>
                                    <option value="bottom">Bottom</option>
                                    <option value="left">Left</option>
                                    <option value="right">Right</option>
                                </select>
                            </div>
                        </div>

                        <!-- Chroma Key Controls (initially hidden) -->
                        <div id="chromaKeyControls" class="space-y-4 hidden">
                            <div>
                                <label for="keyColor" class="block text-sm font-medium text-gray-700 mb-1">Key
                                    Color</label>
                                <input type="color" id="keyColor" name="keyColor" value="#00FF00"
                                    class="h-10 block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                            </div>
                            <div>
                                <label for="similarity" class="block text-sm font-medium text-gray-700 mb-1">Color
                                    Similarity (0-1)</label>
                                <input type="number" id="similarity" name="similarity" min="0" max="1" step="0.1"
                                    value="0.3"
                                    class="block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                            </div>
                            <div>
                                <label for="blend" class="block text-sm font-medium text-gray-700 mb-1">Blend Edges
                                    (0-1)</label>
                                <input type="number" id="blend" name="blend" min="0" max="1" step="0.1" value="0.1"
                                    class="block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Audio Effects Controls Card -->
                <div class="bg-white rounded-lg p-4 shadow-lg">
                    <h3 class="text-lg font-semibold mb-4 text-gray-700 flex items-center justify-between cursor-pointer"
                        onclick="toggleSection('audioEffectsControls')">
                        <div class="flex items-center">
                            <svg class="w-5 h-5 mr-2 text-gray-500" fill="none" stroke="currentColor"
                                viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15.536a5 5 0 001.414 1.414m2.828-9.9a9 9 0 012.828-2.828" />
                            </svg>
                            Audio Effects
                        </div>
                        <svg class="w-5 h-5 transform transition-transform duration-200" id="audioEffectsControlsIcon"
                            fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                        </svg>
                    </h3>
                    <div id="audioEffectsControls" class="space-y-4 transition-all duration-300"
                        style="max-height: 0; overflow: hidden;">
                        <div class="audio-effects-content">
                            <!-- Effect Type Selection -->
                            <div>
                                <label for="audioEffectType" class="block text-sm font-medium text-gray-700 mb-1">Select
                                    Audio Effect</label>
                                <select id="audioEffectType" name="audioEffectType"
                                    class="block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                                    <option value="">None</option>
                                    <option value="normalize">Normalize Audio</option>
                                    <option value="fadeInOut">Fade In/Out</option>
                                    <option value="equalizer">Equalizer</option>
                                    <option value="reverb">Reverb</option>
                                    <option value="compression">Compression</option>
                                    <option value="noise_reduction">Noise Reduction</option>
                                    <option value="pitch">Pitch Shift</option>
                                    <option value="tempo">Tempo Adjust</option>
                                </select>
                            </div>

                            <!-- Preview Controls -->
                            <div
                                class="preview-controls flex items-center justify-between bg-gray-50 p-3 rounded-lg mt-4">
                                <div class="flex items-center space-x-2">
                                    <button type="button" id="previewAudioEffect"
                                        class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 disabled:opacity-50">
                                        Preview Effect
                                    </button>
                                    <button type="button" id="stopAudioPreview"
                                        class="px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 disabled:opacity-50 hidden">
                                        Stop Preview
                                    </button>
                                </div>
                                <div class="text-sm text-gray-600">
                                    Preview Time: <span id="previewTime">5</span>s
                                    <input type="range" id="previewDuration" min="1" max="10" value="5" class="ml-2">
                                </div>
                            </div>

                            <!-- Effect Controls Container -->
                            <div class="effect-controls-container mt-4">
                                <!-- Normalize Controls -->
                                <div id="normalizeControls" class="space-y-4 hidden">
                                    <div>
                                        <label for="normalizeLevel"
                                            class="block text-sm font-medium text-gray-700 mb-1">Target
                                            Level (dB)</label>
                                        <input type="range" id="normalizeLevel" name="normalizeLevel" min="-30" max="0"
                                            value="-14" class="w-full"
                                            oninput="this.nextElementSibling.value = this.value">
                                        <output>-14</output>
                                    </div>
                                </div>

                                <!-- Fade Controls -->
                                <div id="fadeControls" class="space-y-4 hidden">
                                    <div>
                                        <label for="fadeInDuration"
                                            class="block text-sm font-medium text-gray-700 mb-1">Fade In
                                            Duration (s)</label>
                                        <input type="range" id="fadeInDuration" name="fadeInDuration" min="0" max="5"
                                            step="0.1" value="1" class="w-full"
                                            oninput="this.nextElementSibling.value = this.value">
                                        <output>1.0</output>
                                    </div>
                                    <div>
                                        <label for="fadeOutDuration"
                                            class="block text-sm font-medium text-gray-700 mb-1">Fade
                                            Out Duration (s)</label>
                                        <input type="range" id="fadeOutDuration" name="fadeOutDuration" min="0" max="5"
                                            step="0.1" value="1" class="w-full"
                                            oninput="this.nextElementSibling.value = this.value">
                                        <output>1.0</output>
                                    </div>
                                </div>

                                <!-- Equalizer Controls -->
                                <div id="equalizerControls" class="space-y-4 hidden">
                                    <div class="grid grid-cols-3 gap-4">
                                        <div>
                                            <label for="eqLow" class="block text-sm font-medium text-gray-700 mb-1">Low
                                                (dB)</label>
                                            <input type="range" id="eqLow" name="eqLow" min="-12" max="12" value="0"
                                                class="w-full" oninput="this.nextElementSibling.value = this.value">
                                            <output>0</output>
                                        </div>
                                        <div>
                                            <label for="eqMid" class="block text-sm font-medium text-gray-700 mb-1">Mid
                                                (dB)</label>
                                            <input type="range" id="eqMid" name="eqMid" min="-12" max="12" value="0"
                                                class="w-full" oninput="this.nextElementSibling.value = this.value">
                                            <output>0</output>
                                        </div>
                                        <div>
                                            <label for="eqHigh"
                                                class="block text-sm font-medium text-gray-700 mb-1">High (dB)</label>
                                            <input type="range" id="eqHigh" name="eqHigh" min="-12" max="12" value="0"
                                                class="w-full" oninput="this.nextElementSibling.value = this.value">
                                            <output>0</output>
                                        </div>
                                    </div>
                                </div>

                                <!-- Reverb Controls -->
                                <div id="reverbControls" class="space-y-4 hidden">
                                    <div>
                                        <label for="reverbMix" class="block text-sm font-medium text-gray-700 mb-1">Mix
                                            Amount (%)</label>
                                        <input type="range" id="reverbMix" name="reverbMix" min="0" max="100" value="30"
                                            class="w-full" oninput="this.nextElementSibling.value = this.value">
                                        <output>30</output>
                                    </div>
                                    <div>
                                        <label for="reverbRoom"
                                            class="block text-sm font-medium text-gray-700 mb-1">Room Size</label>
                                        <select id="reverbRoom" name="reverbRoom"
                                            class="block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                                            <option value="small">Small Room</option>
                                            <option value="medium" selected>Medium Room</option>
                                            <option value="large">Large Hall</option>
                                            <option value="cathedral">Cathedral</option>
                                        </select>
                                    </div>
                                </div>

                                <!-- Compression Controls -->
                                <div id="compressionControls" class="space-y-4 hidden">
                                    <div>
                                        <label for="compThreshold"
                                            class="block text-sm font-medium text-gray-700 mb-1">Threshold (dB)</label>
                                        <input type="range" id="compThreshold" name="compThreshold" min="-60" max="0"
                                            value="-24" class="w-full"
                                            oninput="this.nextElementSibling.value = this.value">
                                        <output>-24</output>
                                    </div>
                                    <div>
                                        <label for="compRatio"
                                            class="block text-sm font-medium text-gray-700 mb-1">Ratio</label>
                                        <input type="range" id="compRatio" name="compRatio" min="1" max="20" step="0.1"
                                            value="2" class="w-full"
                                            oninput="this.nextElementSibling.value = this.value">
                                        <output>2.0</output>
                                    </div>
                                </div>

                                <!-- Noise Reduction Controls -->
                                <div id="noiseReductionControls" class="space-y-4 hidden">
                                    <div>
                                        <label for="nrStrength"
                                            class="block text-sm font-medium text-gray-700 mb-1">Reduction Strength
                                            (%)</label>
                                        <input type="range" id="nrStrength" name="nrStrength" min="0" max="100"
                                            value="50" class="w-full"
                                            oninput="this.nextElementSibling.value = this.value">
                                        <output>50</output>
                                    </div>
                                </div>

                                <!-- Pitch Controls -->
                                <div id="pitchControls" class="space-y-4 hidden">
                                    <div>
                                        <label for="pitchShift"
                                            class="block text-sm font-medium text-gray-700 mb-1">Pitch Shift
                                            (semitones)</label>
                                        <input type="range" id="pitchShift" name="pitchShift" min="-12" max="12"
                                            value="0" class="w-full"
                                            oninput="this.nextElementSibling.value = this.value">
                                        <output>0</output>
                                    </div>
                                </div>

                                <!-- Tempo Controls -->
                                <div id="tempoControls" class="space-y-4 hidden">
                                    <div>
                                        <label for="tempoFactor"
                                            class="block text-sm font-medium text-gray-700 mb-1">Tempo Factor</label>
                                        <input type="range" id="tempoFactor" name="tempoFactor" min="0.5" max="2.0"
                                            step="0.1" value="1.0" class="w-full"
                                            oninput="this.nextElementSibling.value = this.value">
                                        <output>1.0</output>
                                    </div>
                                    <div class="text-xs text-gray-500">
                                        (0.5 = half speed, 1.0 = normal, 2.0 = double speed)
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Text Overlay Card -->
                <div class="bg-white rounded-lg p-4 shadow-lg">
                    <h3 class="text-lg font-semibold mb-4 text-gray-700 flex items-center justify-between cursor-pointer"
                        onclick="toggleSection('textOverlayControls')">
                        <div class="flex items-center">
                            <svg class="w-5 h-5 mr-2 text-gray-500" fill="none" stroke="currentColor"
                                viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                            </svg>
                            Text Overlay
                        </div>
                        <div class="flex items-center space-x-4">
                            <label class="inline-flex items-center cursor-pointer">
                                <input type="checkbox" id="advancedMode" class="sr-only peer">
                                <div
                                    class="relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600">
                                </div>
                                <span class="ml-3 text-sm font-medium text-gray-700">Advanced Mode</span>
                            </label>
                            <svg class="w-5 h-5 transform transition-transform duration-200"
                                id="textOverlayControlsIcon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M19 9l-7 7-7-7" />
                            </svg>
                        </div>
                    </h3>
                    <div id="textOverlayControls" class="transition-all duration-300 overflow-hidden"
                        style="max-height: 0;">
                        <!-- Simple Mode -->
                        <div id="simpleMode" class="space-y-4">
                            <div>
                                <label for="simpleText" class="block text-sm font-medium text-gray-700 mb-1">Text
                                    Content</label>
                                <input type="text" id="simpleText" name="simpleText"
                                    class="block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"
                                    placeholder="Enter text to overlay">
                            </div>

                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label for="simpleX" class="block text-sm font-medium text-gray-700 mb-1">X Position
                                        (%)</label>
                                    <input type="number" id="simpleX" name="simpleX" min="0" max="100" value="50"
                                        class="block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                                </div>
                                <div>
                                    <label for="simpleY" class="block text-sm font-medium text-gray-700 mb-1">Y Position
                                        (%)</label>
                                    <input type="number" id="simpleY" name="simpleY" min="0" max="100" value="50"
                                        class="block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                                </div>
                            </div>

                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label for="simpleFontSize"
                                        class="block text-sm font-medium text-gray-700 mb-1">Font
                                        Size</label>
                                    <input type="number" id="simpleFontSize" name="simpleFontSize" min="12" max="72"
                                        value="24"
                                        class="block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                                </div>
                                <div>
                                    <label for="simpleColor" class="block text-sm font-medium text-gray-700 mb-1">Text
                                        Color</label>
                                    <input type="color" id="simpleColor" name="simpleColor" value="#ffffff"
                                        class="h-10 block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                                </div>
                            </div>

                            <div>
                                <label for="simpleBgColor"
                                    class="block text-sm font-medium text-gray-700 mb-1">Background
                                    Color</label>
                                <div class="flex gap-2">
                                    <input type="color" id="simpleBgColor" name="simpleBgColor" value="#000000"
                                        class="h-10 block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                                    <input type="number" id="simpleBgOpacity" name="simpleBgOpacity" min="0" max="100"
                                        value="50"
                                        class="w-20 rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"
                                        title="Background Opacity %">
                                </div>
                            </div>
                        </div>

                        <!-- Advanced Mode -->
                        <div id="advancedModeContainer" class="hidden space-y-6">
                            <div id="textOverlaysContainer" class="space-y-6">
                                <!-- Template will be inserted here -->
                            </div>
                        </div>
                    </div>
                </div>

                <input type="hidden" name="videoId" value="<%= videoId %>">
                <input type="hidden" name="pageId" value="<%= pageId %>">
                <input type="hidden" name="sourceFile" value="<%= sourceFile || downloadedFile %>">

                <button type="submit" id="submitButton"
                    class="w-full flex justify-center items-center px-6 py-3 border border-transparent text-base font-medium rounded-lg text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 shadow-lg transition-colors duration-200">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12" />
                    </svg>
                    Apply Changes
                </button>
            </form>
        </div>
    </div>
</div>